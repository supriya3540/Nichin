<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Document
  </title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #f5f6fa; }
    h2 { color: #1a2a6c; }
    table { width: 100%; border-collapse: collapse; margin-top: 10px; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
    th { background: #1a2a6c; color: white; }
    section { background: white; padding: 15px; margin: 15px 0; border-radius: 8px; }
    button { padding: 8px 12px; margin: 5px; background: #1a2a6c; color: white; border: none; border-radius: 4px; cursor: pointer; }
    button:hover { background: #b21f1f; }
    input { padding: 6px; margin: 5px 0; width: 200px; }
  </style>
</head>
<body>

  <h2>Employee Management (DOM + HOF + LocalStorage)</h2>

  <section>
    <button onclick="rankBySalary()">Rank by Salary</button>
    <button onclick="showMaxMin()">Find Max & Min Salary</button>
  </section>

  <section>
    <h3>Employee List</h3>
    <table id="tblRecords">
      <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Address</th>
        <th>Salary</th>
        <th>Actions</th>
      </tr>
    </table>
  </section>

  <section>
    <h3>Add Employee</h3>
    <input type="text" id="txtName" placeholder="Name" />
    <input type="text" id="txtAddress" placeholder="Address" />
    <input type="number" id="txtSalary" placeholder="Salary" />
    <br />
    <button onclick="addEmployee()">Add</button>
  </section>

  <section>
    <h3>Update Employee</h3>
    <input type="number" id="txtEditId" placeholder="ID" disabled />
    <input type="text" id="txtEditName" placeholder="Name" />
    <input type="text" id="txtEditAddress" placeholder="Address" />
    <input type="number" id="txtEditSalary" placeholder="Salary" />
    <br />
    <button onclick="updateEmployee()">Update</button>
  </section>

  <script>
    let employees = JSON.parse(localStorage.getItem("employees")) || [];

    function initData() {
      if (employees.length === 0) {
        const randomNames = ["Arjun", "Kiran", "Rohit", "Manoj", "Sandeep", "Varun", "Nikhil", "Amit", "Deepak", "Suraj"];
        employees = randomNames.map((name, i) => ({
          id: i + 1,
          name,
          address: "Bangalore",
          salary: Math.floor(Math.random() * 50000) + 30000
        }));
        localStorage.setItem("employees", JSON.stringify(employees));
      }
      fillRecords();
    }

    function fillRecords() {
      const table = document.getElementById("tblRecords");
      table.innerHTML = `
        <tr>
          <th>ID</th>
          <th>Name</th>
          <th>Address</th>
          <th>Salary</th>
          <th>Actions</th>
        </tr>
      `;

      employees.forEach(emp => {
        table.innerHTML += `
          <tr>
            <td>${emp.id}</td>
            <td>${emp.name}</td>
            <td>${emp.address}</td>
            <td>${emp.salary}</td>
            <td>
              <button onclick="editEmployee(${emp.id})">Edit</button>
              <button onclick="deleteEmployee(${emp.id})">Delete</button>
            </td>
          </tr>
        `;
      });
    }

    function addEmployee() {
      const name = txtName.value;
      const address = txtAddress.value;
      const salary = parseInt(txtSalary.value);

      const id = employees.length ? employees[employees.length - 1].id + 1 : 1;
      employees.push({ id, name, address, salary });
      localStorage.setItem("employees", JSON.stringify(employees));
      fillRecords();
      alert("Employee Added!");
    }

    function editEmployee(id) {
      const emp = employees.find(e => e.id === id);
      txtEditId.value = emp.id;
      txtEditName.value = emp.name;
      txtEditAddress.value = emp.address;
      txtEditSalary.value = emp.salary;
    }

    function updateEmployee() {
      const id = parseInt(txtEditId.value);
      employees = employees.map(emp =>
        emp.id === id
          ? { ...emp, name: txtEditName.value, address: txtEditAddress.value, salary: parseInt(txtEditSalary.value) }
          : emp
      );
      localStorage.setItem("employees", JSON.stringify(employees));
      fillRecords();
      alert("Employee Updated!");
    }

    function deleteEmployee(id) {
      employees = employees.filter(emp => emp.id !== id);
      localStorage.setItem("employees", JSON.stringify(employees));
      fillRecords();
      alert("Employee Deleted!");
    }

   
    function rankBySalary() {
      employees = employees.sort((a, b) => b.salary - a.salary); 
      fillRecords();
      alert("Employees ranked by salary (High to Low)");
    }

    function showMaxMin() {
      const maxSalary = employees.reduce((max, e) => e.salary > max ? e.salary : max, employees[0].salary);
      const minSalary = employees.reduce((min, e) => e.salary < min ? e.salary : min, employees[0].salary);

      alert("Max Salary: " + maxSalary + "\nMin Salary: " + minSalary);
    }

    window.onload = initData;
  </script>

</body>
</html>

